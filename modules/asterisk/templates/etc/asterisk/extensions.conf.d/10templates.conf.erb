; This file is generated by Puppet
;  DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
;
[ksp-localdial]
exten => s,1,NoOp()
    same => n,Set(DeviceID=${DB(SIP/Device/${ARG1}@${ARG2})})
    same => n,GotoIf($[${ISNULL(${DeviceID})}]?mailbox,1)
    same => n,Dial(SIP/${DeviceID},20)
    same => n,Goto(s-${DIALSTATUS},1)

exten => s-NOANSWER,1,NoOp()
    same => n,Voicemail(${ARG1}@${ARG2},u)
    same => n,Return()

exten => s-BUSY,1,NoOp()
    same => n,Voicemail(${ARG1}@${ARG2},b)
    same => n,Return()

exten => _s-.,1,NoOp()
    same => n,Goto(s-NOANSWER,1)

exten => mailbox,1,NoOp()
    same => n,GotoIf($[${MAILBOX_EXISTS(${ARG1}@${ARG2})} == 0]?invalid,1)
    same => n,Goto(s-NOANSWER,1)

exten => invalid,1,NoOp()
    same => n,Playback(invalid)
    same => n,Hangup()

; vim:sw=4:ts=4:expandtab:textwidth=79
