#!/bin/sh

EXCLUDE="--exclude=/* --exclude=<%= repo %>/*/bin/ --exclude=<%= repo %>/*/db/ --exclude=<%= repo %>/*/conf/ --exclude=<%= repo %>/*/incoming/ --exclude=<%= repo %>/*/tmp/"
INCLUDE="--include=<%= repo %>"

rsync -avz --quiet --delete ${INCLUDE} ${EXCLUDE} <%= scope.lookupvar('reprepro::params::basedir') %>/repos/<%= name %>/ <%= scope.lookupvar('reprepro::params::user') %>@<%= rsynchostname %>:/var/www/<%= rsynchostname %>/html/<%= name %>
